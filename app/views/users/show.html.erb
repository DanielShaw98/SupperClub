<h3>Hi <%= @user.first_name %> <%= @user.last_name %></h3>

<br>

<h2>My tickets: </h2>
<% @valid_tickets.each do |ticket| %>
  <% event = ticket.event %>
  <p>Venue: <%= event.venue %></p>
  <p><%= ticket.start_time.hour %>:<%= ticket.start_time.min < 10 ? "0#{ticket.start_time.min}" : ticket.start_time.min %> - <%= ticket.end_time.hour %>:<%= ticket.end_time.min < 10 ? "0#{ticket.end_time.min}" : ticket.end_time.min %>, <%= Time.parse(event.date.to_s).strftime("%d-%m-%Y") %></p>
  <% if !ticket.guests.nil? %>
    <p>Guests: <%= ticket.guests %></p>
  <% end %>
  <p>This event takes place in <%= distance_of_time_in_words(event.date.to_time - Time.now) %></p>
  <%= link_to "More info", event_path(event) %><br>
  <%= link_to "Cancel ticket", ticket_path(ticket),
  data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
<% end %>


<%# I sort the events that the user hosts %>
<h2>My events: </h2>
<% @upcoming_events.each do |event| %>
  <p>Venue: <%= event.venue %></p>
  <p>Capacity: <%= event.capacity %></p>
  <p>Date: <%= event.date %></p>
  <p>This event takes place in <%= distance_of_time_in_words(event.date.to_time - Time.now) %></p>
  <%= link_to "More info", event_path(event) %><br>
  <%= link_to "Edit event", edit_event_path(event) %><br>
  <%= link_to "Cancel event", event_path(event),
  data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
<% end %>
